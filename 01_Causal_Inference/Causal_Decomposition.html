<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Causal Decomposition Analysis – Kentaro-Kamada</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Kentaro-Kamada</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-causal-inference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Causal Inference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-causal-inference">    
        <li>
    <a class="dropdown-item" href="../01_Causal_Inference/TMLE.html">
 <span class="dropdown-text">Targeted Maximum Likelihood Estimation / Targeted Minimum Loss-based Estimation (TMLE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Causal_Inference/L-TMLE.html">
 <span class="dropdown-text">Longitudinal TMLE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Causal_Inference/Causal_Decomposition.html">
 <span class="dropdown-text">Causal Decomposition Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Causal_Inference/Sudharsanan_Bijlsma_2021_読解.html">
 <span class="dropdown-text">Sudharsanan_Bijlsma_2021_Educational note 読解</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Causal_Inference/Borusyak_2024.html">
 <span class="dropdown-text">Borusyak et al.&nbsp;2024</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-r-tips" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">R Tips</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-r-tips">    
        <li>
    <a class="dropdown-item" href="../01_R_Tips/tensorflow_with_Rstudio.html">
 <span class="dropdown-text">tensorflowをRstudioで</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_R_Tips/how_to_change_BLAS.html">
 <span class="dropdown-text">BLASの変更によるRの高速化</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_R_Tips/r_installation_with_rig.html">
 <span class="dropdown-text">バージョンを指定したRのインストール</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-others" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Others</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-others">    
        <li>
    <a class="dropdown-item" href="../01_Others/rlang学習.html">
 <span class="dropdown-text">rlang学習</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Others/度数から対数尤度を計算.html">
 <span class="dropdown-text">観測度数・期待度数から対数尤度を計算する方法</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Others/Multilevel.html">
 <span class="dropdown-text">マルチレベルモデルは点推定値に影響を及ぼすか？</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Others/multi_answer.html">
 <span class="dropdown-text">マルチアンサーの処理</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Others/複利計算.html">
 <span class="dropdown-text">複利計算</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#前準備" id="toc-前準備" class="nav-link active" data-scroll-target="#前準備">前準備</a></li>
  <li><a href="#continuuous-mediator" id="toc-continuuous-mediator" class="nav-link" data-scroll-target="#continuuous-mediator">continuuous mediator</a>
  <ul class="collapse">
  <li><a href="#cfdecomp" id="toc-cfdecomp" class="nav-link" data-scroll-target="#cfdecomp"><code>cfdecomp</code></a></li>
  <li><a href="#causal.decomp" id="toc-causal.decomp" class="nav-link" data-scroll-target="#causal.decomp"><code>causal.decomp</code></a></li>
  </ul></li>
  <li><a href="#binary-mediator" id="toc-binary-mediator" class="nav-link" data-scroll-target="#binary-mediator">binary mediator</a>
  <ul class="collapse">
  <li><a href="#cfdecomp-1" id="toc-cfdecomp-1" class="nav-link" data-scroll-target="#cfdecomp-1"><code>cfdecomp</code></a></li>
  <li><a href="#causal.decomp-1" id="toc-causal.decomp-1" class="nav-link" data-scroll-target="#causal.decomp-1"><code>causal.decomp</code></a></li>
  <li><a href="#gapclosing" id="toc-gapclosing" class="nav-link" data-scroll-target="#gapclosing"><code>gapclosing</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Causal Decomposition Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="前準備" class="level2">
<h2 class="anchored" data-anchor-id="前準備">前準備</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cfdecomp)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapclosing)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(causal.decomp)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  sMIDUS <span class="sc">|&gt;</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">Y =</span> health <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),  <span class="co"># outcome</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">T =</span> edu <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),   <span class="co"># treatment (continuous)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">T2 =</span> edu <span class="sc">|&gt;</span> <span class="fu">case_match</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span> <span class="sc">~</span> <span class="dv">0</span>,   <span class="co"># treatment (binary)</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                                   <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">.default =</span> <span class="cn">NA</span>) <span class="sc">|&gt;</span> <span class="fu">factor</span>(),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">X =</span> racesex <span class="sc">|&gt;</span> <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>)),  <span class="co"># note!</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">L1 =</span> lowchildSES <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">L2 =</span> abuse <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">C1 =</span> age <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">C2 =</span> stroke <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">C3 =</span> T2DM <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">C4 =</span> heart <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(L1<span class="sc">:</span>C4, \(.x){.x <span class="sc">-</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)})) <span class="sc">|&gt;</span> </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="continuuous-mediator" class="level1">
<h1>continuuous mediator</h1>
<section id="cfdecomp" class="level2">
<h2 class="anchored" data-anchor-id="cfdecomp"><code>cfdecomp</code></h2>
<ul>
<li><span class="citation" data-cites="Sudharsanan2021">Sudharsanan and Bijlsma (<a href="#ref-Sudharsanan2021" role="doc-biblioref">2021</a>)</span> の方法。mediatorの値をシミュレーションで複数生成するのが特徴</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cfd.mean</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>fit_cfdecomp <span class="ot">&lt;-</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  cfdecomp<span class="sc">::</span><span class="fu">cfd.mean</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula.y =</span> <span class="st">'Y ~ X + T + X:T + L1 + L2 + C1 + C2 + C3 + C4'</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula.m =</span> <span class="st">'T ~ X + C1 + C2 + C3 + C4'</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mediator =</span> <span class="st">'T'</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="st">'X'</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> d <span class="sc">|&gt;</span> <span class="fu">data.frame</span>(),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">family.y =</span> <span class="st">'gaussian'</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">family.m =</span> <span class="st">'gaussian'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">bs.size =</span> <span class="dv">50</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mc.size =</span> <span class="dv">10</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.05</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fit_cfdecomp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$out_nc_m
          1        4        2        3
1  7.731107 5.862364 7.096035 6.420827
2  7.710372 5.874706 7.072613 6.418001
3  7.729287 5.845363 7.091814 6.402172
4  7.695194 5.835458 7.113750 6.333537
5  7.709459 5.885473 7.089304 6.416817
6  7.711736 5.892668 7.065101 6.396395
7  7.718981 5.897499 7.053342 6.420924
8  7.737605 5.867735 7.074898 6.385157
9  7.743529 5.856016 7.053179 6.455156
10 7.692660 5.873005 7.048532 6.402734
11 7.700931 5.930579 7.073603 6.414454
12 7.709857 5.868390 7.057170 6.412065
13 7.660079 5.880086 7.090363 6.418543
14 7.710393 5.895310 7.079329 6.504930
15 7.713723 5.877004 7.073093 6.424146
16 7.700547 5.882369 7.077779 6.355311
17 7.704623 5.785021 7.080278 6.413351
18 7.667512 5.873864 7.103714 6.395201
19 7.697056 5.859268 7.129273 6.370715
20 7.717567 5.856811 7.066087 6.427390
21 7.718417 5.940837 7.056317 6.300270
22 7.714834 5.917167 7.077442 6.428109
23 7.687950 5.817567 7.091451 6.453549
24 7.714199 5.896253 7.067718 6.378753
25 7.716140 5.897198 7.072739 6.418608
26 7.717260 5.851545 7.106499 6.322000
27 7.728011 5.906222 7.093237 6.503905
28 7.721451 5.880151 7.080311 6.317035
29 7.704000 5.894500 7.082438 6.448184
30 7.734425 5.894040 7.100767 6.348688
31 7.655565 5.856737 7.071105 6.440338
32 7.712734 5.880527 7.077625 6.417011
33 7.688714 5.866698 7.039276 6.384534
34 7.722024 5.871955 7.064584 6.461704
35 7.712073 5.889282 7.075899 6.433744
36 7.672385 5.868874 7.111429 6.325871
37 7.701811 5.844496 7.083837 6.416046
38 7.725763 5.897123 7.072589 6.451187
39 7.702589 5.838610 7.095121 6.452029
40 7.723586 5.885005 7.036331 6.440488
41 7.727903 5.913520 7.039724 6.358536
42 7.690323 5.894879 7.092623 6.484075
43 7.741177 5.855015 7.063396 6.408379
44 7.731829 5.897012 7.115979 6.432608
45 7.768036 5.873023 7.057458 6.501102
46 7.708982 5.894930 7.072425 6.425957
47 7.670717 5.833270 7.072245 6.512370
48 7.699773 5.870835 7.109132 6.458289
49 7.705364 5.846849 7.098625 6.321133
50 7.713340 5.920546 7.072171 6.461629

$out_cf_m
          1        4        2        3
1  7.708350 7.722585 7.723794 7.716957
2  7.712913 7.733073 7.729318 7.694003
3  7.736111 7.764328 7.740986 7.718688
4  7.705646 7.742209 7.734476 7.723840
5  7.704552 7.699852 7.709041 7.675510
6  7.713983 7.716303 7.718639 7.661669
7  7.708561 7.726610 7.715453 7.687802
8  7.730732 7.716861 7.732809 7.719617
9  7.735597 7.731789 7.732477 7.743175
10 7.693129 7.696694 7.722009 7.660469
11 7.690469 7.701887 7.684750 7.718891
12 7.714458 7.726172 7.723104 7.687651
13 7.688269 7.701443 7.691177 7.630499
14 7.705480 7.719773 7.720290 7.723078
15 7.699542 7.722704 7.723965 7.664636
16 7.705741 7.688666 7.705191 7.710428
17 7.700182 7.719994 7.706265 7.712396
18 7.674769 7.712930 7.695907 7.644272
19 7.707815 7.703147 7.714546 7.665647
20 7.707407 7.713980 7.734133 7.718156
21 7.700225 7.730233 7.715030 7.682727
22 7.716103 7.679059 7.675806 7.662687
23 7.691072 7.687812 7.695899 7.685424
24 7.714525 7.725910 7.743707 7.703314
25 7.717127 7.700888 7.714776 7.708556
26 7.717766 7.703144 7.709922 7.698403
27 7.743411 7.724071 7.737973 7.729505
28 7.718924 7.725136 7.724812 7.690157
29 7.707100 7.718769 7.714549 7.726620
30 7.728967 7.774284 7.761742 7.713455
31 7.655832 7.693236 7.700636 7.621821
32 7.721800 7.704404 7.711805 7.684146
33 7.717686 7.692474 7.710944 7.682718
34 7.711620 7.710729 7.743366 7.702984
35 7.711407 7.714970 7.718632 7.729888
36 7.675748 7.676697 7.689787 7.653327
37 7.704454 7.705490 7.717777 7.718488
38 7.726633 7.749533 7.732910 7.719652
39 7.696247 7.665819 7.710711 7.638711
40 7.733168 7.751703 7.742452 7.714189
41 7.712413 7.752997 7.748047 7.714767
42 7.699511 7.717476 7.703775 7.733894
43 7.736720 7.730948 7.751500 7.730856
44 7.724982 7.747891 7.743453 7.699396
45 7.769107 7.786505 7.785645 7.768933
46 7.710610 7.704217 7.720534 7.695336
47 7.663390 7.685722 7.697455 7.672185
48 7.688782 7.720037 7.701725 7.703989
49 7.708263 7.716284 7.701585 7.706781
50 7.717211 7.720879 7.739882 7.706129

$out_nc_quantile_m
             1        4        2        3
2.5%  7.661751 5.821100 7.039377 6.317957
50%   7.711905 5.875855 7.076671 6.418272
97.5% 7.743000 5.928322 7.115478 6.504699

$out_cf_quantile_m
             1        4        2        3
2.5%  7.665950 7.677228 7.685884 7.632347
50%   7.709585 7.717169 7.718636 7.703652
97.5% 7.741905 7.772044 7.759438 7.741087

$out_nc_y
          1        4        2        3
1  7.621034 6.643970 7.322055 6.924275
2  7.633738 6.670871 7.317397 6.966114
3  7.613516 6.654114 7.339716 6.962072
4  7.566001 6.714272 7.344477 6.923949
5  7.582663 6.608517 7.342108 6.982281
6  7.624485 6.721935 7.344109 7.015607
7  7.615700 6.669074 7.317056 6.937811
8  7.590878 6.688900 7.297130 6.921428
9  7.616753 6.662662 7.347560 6.953588
10 7.598659 6.681245 7.315698 6.910735
11 7.641283 6.713114 7.232797 7.026384
12 7.632483 6.713234 7.337456 6.938076
13 7.597162 6.705088 7.369370 6.854373
14 7.545819 6.799541 7.324269 7.202672
15 7.604351 6.638954 7.359117 6.883424
16 7.637843 6.681505 7.313626 6.977353
17 7.573141 6.662691 7.302981 7.036249
18 7.627397 6.671481 7.302699 6.827321
19 7.632182 6.669407 7.339087 6.933783
20 7.667363 6.623564 7.285607 7.011452
21 7.546940 6.761133 7.320757 7.029462
22 7.619675 6.777865 7.317513 6.913706
23 7.597489 6.665322 7.329419 7.145886
24 7.589674 6.693107 7.305496 6.855245
25 7.628732 6.758465 7.335364 6.944407
26 7.695394 6.726443 7.322023 6.900229
27 7.617854 6.704219 7.353574 6.912435
28 7.584768 6.686726 7.324453 6.965376
29 7.585898 6.705098 7.328178 6.890520
30 7.595551 6.717583 7.330339 6.921962
31 7.556648 6.740562 7.341279 6.845864
32 7.651729 6.675705 7.288505 6.985546
33 7.598460 6.721346 7.300277 6.891533
34 7.611980 6.679736 7.314816 6.954367
35 7.569213 6.764731 7.269572 7.001851
36 7.569618 6.663174 7.341241 6.981874
37 7.526921 6.713062 7.341001 6.950535
38 7.585837 6.663266 7.304704 7.068719
39 7.601394 6.760833 7.289152 6.978806
40 7.596236 6.706722 7.316682 7.026793
41 7.576958 6.713345 7.280860 6.940524
42 7.554825 6.716216 7.326328 7.071289
43 7.588654 6.663031 7.300477 6.945659
44 7.588610 6.642729 7.319296 6.908200
45 7.592491 6.720409 7.354450 7.113536
46 7.584048 6.741128 7.314114 7.078543
47 7.579594 6.666064 7.341296 6.976665
48 7.611844 6.690621 7.320031 6.974167
49 7.563035 6.696348 7.331681 6.869391
50 7.617165 6.672579 7.364220 6.931810

$out_cf_y
          1        4        2        3
1  7.615449 7.066474 7.491511 7.384101
2  7.634262 6.992428 7.451083 7.015862
3  7.615087 7.156897 7.481442 7.287263
4  7.568536 7.268018 7.497931 7.372646
5  7.581442 7.060231 7.499538 7.052493
6  7.624983 7.440954 7.514685 7.139768
7  7.612750 7.261943 7.487122 7.231810
8  7.589686 7.195857 7.439595 7.129562
9  7.614400 7.243737 7.490440 7.276700
10 7.598802 7.288846 7.498990 7.385749
11 7.638632 7.301550 7.391038 7.298745
12 7.633616 7.129459 7.484796 7.067990
13 7.603697 7.190594 7.493655 6.832317
14 7.544576 7.368068 7.511505 7.318609
15 7.601031 7.131709 7.509931 7.076647
16 7.639145 7.357993 7.478816 7.170166
17 7.571903 7.397812 7.487491 7.107398
18 7.628797 7.192846 7.462779 7.117366
19 7.634705 7.111518 7.434190 7.399737
20 7.665212 7.268880 7.436029 7.225628
21 7.543768 7.306616 7.491977 7.237363
22 7.619980 7.368201 7.448897 7.113867
23 7.598233 7.351131 7.486429 7.424914
24 7.589759 7.274429 7.483346 7.033521
25 7.628955 7.269230 7.478446 7.145831
26 7.695517 7.276190 7.449751 7.042623
27 7.621503 7.297217 7.503546 7.152087
28 7.584135 7.221680 7.471701 7.426957
29 7.586723 7.283837 7.482231 7.208557
30 7.594070 7.094408 7.471540 7.275556
31 7.556706 7.495113 7.467534 7.165933
32 7.654033 7.215387 7.401768 7.310744
33 7.605717 7.257055 7.481343 7.428953
34 7.609447 7.211330 7.470230 7.316104
35 7.569079 7.475382 7.437128 7.377035
36 7.570174 7.191352 7.458905 7.313817
37 7.527441 7.289334 7.488176 7.142439
38 7.586023 7.232231 7.453361 7.230344
39 7.600187 7.270059 7.426482 7.222822
40 7.598377 7.151726 7.466375 7.256411
41 7.573373 7.307811 7.415343 7.270441
42 7.557685 7.300850 7.479898 7.305634
43 7.587329 7.072684 7.488139 7.161201
44 7.586934 7.324096 7.484599 7.048006
45 7.592793 7.302028 7.525389 7.534480
46 7.584543 7.191902 7.473777 7.384518
47 7.577544 7.254755 7.484254 7.325500
48 7.609535 7.086800 7.457066 7.277445
49 7.563548 7.304756 7.486797 7.128809
50 7.618269 7.276524 7.488949 7.242437

$out_nc_quantile_y
             1        4        2        3
2.5%  7.546071 6.627026 7.272112 6.847778
50%   7.597325 6.691864 7.322039 6.952062
97.5% 7.663845 6.774910 7.363072 7.138607

$out_cf_quantile_y
             1        4        2        3
2.5%  7.543950 7.061636 7.404822 7.019835
50%   7.598589 7.268449 7.481392 7.234587
97.5% 7.662697 7.467635 7.513970 7.428504

$mediation
        4         2         3 
0.6137552 0.5564163 0.4214775 

$mediation_quantile
              4         2          3
2.5%  0.4293937 0.3284408 0.08406186
97.5% 0.8662784 0.7838182 0.75684386

$mc_conv_info_m
          [,1]     [,2]     [,3]     [,4]
 [1,] 7.714687 5.882658 7.101293 6.434694
 [2,] 7.735273 5.860228 7.109142 6.425760
 [3,] 7.729892 5.869614 7.102033 6.427961
 [4,] 7.728124 5.867163 7.105497 6.422210
 [5,] 7.725496 5.868032 7.099355 6.435313
 [6,] 7.731321 5.872739 7.096583 6.433744
 [7,] 7.721929 5.866966 7.094652 6.436417
 [8,] 7.724117 5.860777 7.098441 6.437772
 [9,] 7.727046 5.865477 7.096471 6.429285
[10,] 7.731107 5.862364 7.096035 6.420827

$mc_conv_info_y
          [,1]     [,2]     [,3]     [,4]
 [1,] 7.617004 6.648579 7.323474 6.929194
 [2,] 7.622056 6.643485 7.325593 6.926025
 [3,] 7.620736 6.645616 7.323674 6.926806
 [4,] 7.620302 6.645060 7.324609 6.924765
 [5,] 7.619657 6.645257 7.322951 6.929414
 [6,] 7.621086 6.646326 7.322203 6.928857
 [7,] 7.618781 6.645015 7.321681 6.929806
 [8,] 7.619318 6.643609 7.322704 6.930286
 [9,] 7.620037 6.644677 7.322172 6.927276
[10,] 7.621034 6.643970 7.322055 6.924275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">2</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.9041596</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">2</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.3525951</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">2</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.5515645</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fit_cfdecomp<span class="sc">$</span>mediation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        4         2         3 
0.6137552 0.5564163 0.4214775 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">3</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2785655</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">3</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1272748</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">3</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1512907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">4</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.6369167</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">4</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.3722955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp<span class="sc">$</span>out_nc_y[,<span class="dv">4</span>] <span class="sc">-</span> fit_cfdecomp<span class="sc">$</span>out_cf_y[,<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2646212</code></pre>
</div>
</div>
</section>
<section id="causal.decomp" class="level2">
<h2 class="anchored" data-anchor-id="causal.decomp"><code>causal.decomp</code></h2>
<ul>
<li><span class="citation" data-cites="Park2023a">Park, Kang, and Lee (<a href="#ref-Park2023a" role="doc-biblioref">2023</a>)</span> の方法。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># smi </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>fit.y <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X <span class="sc">+</span> T <span class="sc">+</span> X<span class="sc">:</span>T <span class="sc">+</span> L1 <span class="sc">+</span> L2 <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4, <span class="at">data =</span> d)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>fit.m <span class="ot">&lt;-</span> <span class="fu">lm</span>(T <span class="sc">~</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4, <span class="at">data =</span> d)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>fit_smi <span class="ot">&lt;-</span> <span class="fu">smi</span>(<span class="at">fit.y =</span> fit.y,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fit.m =</span> fit.m,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">treat =</span> <span class="st">"X"</span>, </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sims =</span> <span class="dv">100</span>, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">conf.level =</span> .<span class="dv">95</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">conditional =</span> <span class="cn">TRUE</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">covariates =</span> <span class="dv">1</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># baseline covariatesを調整できる</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#covariates = c("C1", "C2", "C3", "C4"),</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">227</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>fit_smi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Results:

                               estimate 95% CI Lower 95% CI Upper
Initial Disparity   (1 vs 4) -0.8993401   -0.9925190  -0.79813505
Disparity Remaining (1 vs 4) -0.3384430   -0.4880863  -0.14795873
Disparity Reduction (1 vs 4) -0.5608971   -0.7346168  -0.42650061
Initial Disparity   (1 vs 2) -0.2749659   -0.3378874  -0.19366549
Disparity Remaining (1 vs 2) -0.1213246   -0.2203441  -0.05458727
Disparity Reduction (1 vs 2) -0.1536412   -0.1896213  -0.10521328
Initial Disparity   (1 vs 3) -0.6137425   -0.7326095  -0.47793913
Disparity Remaining (1 vs 3) -0.3500123   -0.5151994  -0.08733348
Disparity Reduction (1 vs 3) -0.2637302   -0.4880614  -0.11574038</code></pre>
</div>
</div>
<ul>
<li>sensitivity analysis<span class="citation" data-cites="Park2023">(<a href="#ref-Park2023" role="doc-biblioref">Park et al. 2023</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>sensRes <span class="ot">&lt;-</span> <span class="fu">sensitivity</span>(<span class="at">boot.res =</span> fit_smi, <span class="at">fit.m =</span> fit.m, <span class="at">fit.y =</span> fit.y, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mediator =</span> <span class="st">"T"</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">covariates =</span> <span class="fu">c</span>(<span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span>, <span class="st">"C4"</span>), </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">treat =</span> <span class="st">"X"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">sel.lev.treat =</span> <span class="st">"4"</span>, </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">max.rsq =</span> <span class="fl">0.3</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sensRes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="binary-mediator" class="level1">
<h1>binary mediator</h1>
<section id="cfdecomp-1" class="level2">
<h2 class="anchored" data-anchor-id="cfdecomp-1"><code>cfdecomp</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cfd.mean</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>fit_cfdecomp_b <span class="ot">&lt;-</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cfd.mean</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula.y =</span> <span class="st">'Y ~ X + T2 + X:T2 + L1 + L2 + C1 + C2 + C3 + C4'</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula.m =</span> <span class="st">'T2 ~ X + C1 + C2 + C3 + C4'</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mediator =</span> <span class="st">'T2'</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="st">'X'</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">T2 =</span> <span class="fu">as.numeric</span>(T2) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">data.frame</span>(),</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">family.y =</span> <span class="st">'gaussian'</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">family.m =</span> <span class="st">'binomial'</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">bs.size =</span> <span class="dv">50</span>,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mc.size =</span> <span class="dv">10</span>,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.05</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"4"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.8981701</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"4"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.5546351</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"4"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"4"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.343535</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>fit_cfdecomp_b<span class="sc">$</span>mediation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        4         2         3 
0.3828971 0.1298177 0.2061071 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"2"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2774845</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"2"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.2419289</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"2"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"2"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.03555558</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"3"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.5849521</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"3"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"1"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.4655888</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fit_cfdecomp_b<span class="sc">$</span>out_nc_y[,<span class="st">"3"</span>] <span class="sc">-</span> fit_cfdecomp_b<span class="sc">$</span>out_cf_y[,<span class="st">"3"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1193632</code></pre>
</div>
</div>
</section>
<section id="causal.decomp-1" class="level2">
<h2 class="anchored" data-anchor-id="causal.decomp-1"><code>causal.decomp</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># smi</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>fit.y <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X <span class="sc">+</span> T2 <span class="sc">+</span> X<span class="sc">:</span>T2 <span class="sc">+</span> L1 <span class="sc">+</span> L2 <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4, <span class="at">data =</span> d)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>fit.m <span class="ot">&lt;-</span> <span class="fu">glm</span>(T2 <span class="sc">~</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4, <span class="at">data =</span> d, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>fit_smi_b <span class="ot">&lt;-</span> <span class="fu">smi</span>(<span class="at">fit.y =</span> fit.y,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">fit.m =</span> fit.m,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">treat =</span> <span class="st">"X"</span>, </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">sims =</span> <span class="dv">100</span>, </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">conf.level =</span> .<span class="dv">95</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">conditional =</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>               <span class="co"># covariates = 1,</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">covariates =</span> <span class="fu">c</span>(<span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span>, <span class="st">"C4"</span>),</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">seed =</span> <span class="dv">123456</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>fit_smi_b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Results:

                                estimate 95% CI Lower 95% CI Upper
Initial Disparity   (1 vs 4) -0.95667843  -1.02938841  -0.88175003
Disparity Remaining (1 vs 4) -0.61262729  -0.77966809  -0.46844380
Disparity Reduction (1 vs 4) -0.34405113  -0.49650368  -0.21581205
Initial Disparity   (1 vs 2) -0.31394841  -0.38058533  -0.26000373
Disparity Remaining (1 vs 2) -0.27995004  -0.34624791  -0.22226331
Disparity Reduction (1 vs 2) -0.03399837  -0.05003528  -0.02022012
Initial Disparity   (1 vs 3) -0.59968604  -0.69525994  -0.49987857
Disparity Remaining (1 vs 3) -0.48148718  -0.61387973  -0.32105036
Disparity Reduction (1 vs 3) -0.11819886  -0.24676548  -0.03361808</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>sensRes <span class="ot">&lt;-</span> <span class="fu">sensitivity</span>(<span class="at">boot.res =</span> fit_smi_b, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fit.m =</span> fit.m, </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fit.y =</span> fit.y, </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mediator =</span> <span class="st">"T2"</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">covariates =</span> <span class="fu">c</span>(<span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span>, <span class="st">"C4"</span>), </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">treat =</span> <span class="st">"X"</span>,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">sel.lev.treat =</span> <span class="st">"4"</span>, </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">max.rsq =</span> <span class="fl">0.3</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sensRes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gapclosing" class="level2">
<h2 class="anchored" data-anchor-id="gapclosing"><code>gapclosing</code></h2>
<ul>
<li><span class="citation" data-cites="Lundberg2022a">Lundberg (<a href="#ref-Lundberg2022a" role="doc-biblioref">2022</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gapclosing - regression</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># stochastic intervention</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># treatmentの割り当て確率の予測値を算出</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>fit_glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(T2 <span class="sc">~</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3, <span class="at">data =</span> d, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 全員のtreatmentが1だった時の予測値</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>assing_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_glm, <span class="at">newdata =</span> d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">X =</span> <span class="st">"1"</span>), <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 予測値をもとにrandom draw</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>draw <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="at">n =</span> <span class="fu">nrow</span>(d), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> assing_prob)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>fit_gapclosing <span class="ot">&lt;-</span> </span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gapclosing</span>(</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">T2 =</span> <span class="fu">as.numeric</span>(T2) <span class="sc">-</span> <span class="dv">1</span>),</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">outcome_formula =</span> Y <span class="sc">~</span> T2 <span class="sc">*</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4 <span class="sc">+</span> L1 <span class="sc">+</span> L2,</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">treatment_name =</span> <span class="st">"T2"</span>,</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_name =</span> <span class="st">"X"</span>,</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">counterfactual_assignments =</span> draw <span class="co"># random draw</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>fit_gapclosing</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Factual mean outcomes:
# A tibble: 4 × 2
  X     estimate
  &lt;fct&gt;    &lt;dbl&gt;
1 1         7.60
2 4         6.70
3 2         7.32
4 3         6.98

Counterfactual mean outcomes (post-intervention means):
# A tibble: 4 × 2
  X     estimate
  &lt;fct&gt;    &lt;dbl&gt;
1 1         7.60
2 4         7.03
3 2         7.36
4 3         7.11

Factual disparities:
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4    0.899
 2 1 - 2    0.275
 3 1 - 3    0.614
 4 4 - 1   -0.899
 5 4 - 2   -0.624
 6 4 - 3   -0.286
 7 2 - 1   -0.275
 8 2 - 4    0.624
 9 2 - 3    0.339
10 3 - 1   -0.614
11 3 - 4    0.286
12 3 - 2   -0.339

Counterfactual disparities (gap-closing estimands):
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4   0.566 
 2 1 - 2   0.241 
 3 1 - 3   0.483 
 4 4 - 1  -0.566 
 5 4 - 2  -0.325 
 6 4 - 3  -0.0830
 7 2 - 1  -0.241 
 8 2 - 4   0.325 
 9 2 - 3   0.242 
10 3 - 1  -0.483 
11 3 - 4   0.0830
12 3 - 2  -0.242 

Additive gap closed: Counterfactual - Factual
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4   0.334 
 2 1 - 2   0.0339
 3 1 - 3   0.131 
 4 4 - 1  -0.334 
 5 4 - 2  -0.300 
 6 4 - 3  -0.203 
 7 2 - 1  -0.0339
 8 2 - 4   0.300 
 9 2 - 3   0.0972
10 3 - 1  -0.131 
11 3 - 4   0.203 
12 3 - 2  -0.0972

Proportional gap closed: (Counterfactual - Factual) / Factual
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4    0.371
 2 1 - 2    0.123
 3 1 - 3    0.214
 4 4 - 1    0.371
 5 4 - 2    0.480
 6 4 - 3    0.710
 7 2 - 1    0.123
 8 2 - 4    0.480
 9 2 - 3    0.287
10 3 - 1    0.214
11 3 - 4    0.710
12 3 - 2    0.287</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"4"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-8-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>機械学習をつかったdoubly robustな方法も使える</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gapclosing - ranger, doubly robust</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>fit_gapclosing_ranger <span class="ot">&lt;-</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gapclosing</span>(</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">T2 =</span> <span class="fu">as.numeric</span>(T2) <span class="sc">-</span> <span class="dv">1</span>),</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome_formula =</span> Y <span class="sc">~</span> T2 <span class="sc">+</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4 <span class="sc">+</span> L1 <span class="sc">+</span> L2,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">treatment_formula =</span> T2 <span class="sc">~</span> X <span class="sc">+</span> C1 <span class="sc">+</span> C2 <span class="sc">+</span> C3 <span class="sc">+</span> C4 <span class="sc">+</span> L1 <span class="sc">+</span> L2, </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">treatment_name =</span> <span class="st">"T2"</span>,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">treatment_algorithm =</span> <span class="st">"ranger"</span>,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome_algorithm =</span> <span class="st">"ranger"</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">category_name =</span> <span class="st">"X"</span>,</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">counterfactual_assignments =</span> <span class="fu">rbinom</span>(<span class="at">n =</span> <span class="fu">nrow</span>(d), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> assing_prob) </span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>fit_gapclosing</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Factual mean outcomes:
# A tibble: 4 × 2
  X     estimate
  &lt;fct&gt;    &lt;dbl&gt;
1 1         7.60
2 4         6.70
3 2         7.32
4 3         6.98

Counterfactual mean outcomes (post-intervention means):
# A tibble: 4 × 2
  X     estimate
  &lt;fct&gt;    &lt;dbl&gt;
1 1         7.60
2 4         7.03
3 2         7.36
4 3         7.11

Factual disparities:
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4    0.899
 2 1 - 2    0.275
 3 1 - 3    0.614
 4 4 - 1   -0.899
 5 4 - 2   -0.624
 6 4 - 3   -0.286
 7 2 - 1   -0.275
 8 2 - 4    0.624
 9 2 - 3    0.339
10 3 - 1   -0.614
11 3 - 4    0.286
12 3 - 2   -0.339

Counterfactual disparities (gap-closing estimands):
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4   0.566 
 2 1 - 2   0.241 
 3 1 - 3   0.483 
 4 4 - 1  -0.566 
 5 4 - 2  -0.325 
 6 4 - 3  -0.0830
 7 2 - 1  -0.241 
 8 2 - 4   0.325 
 9 2 - 3   0.242 
10 3 - 1  -0.483 
11 3 - 4   0.0830
12 3 - 2  -0.242 

Additive gap closed: Counterfactual - Factual
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4   0.334 
 2 1 - 2   0.0339
 3 1 - 3   0.131 
 4 4 - 1  -0.334 
 5 4 - 2  -0.300 
 6 4 - 3  -0.203 
 7 2 - 1  -0.0339
 8 2 - 4   0.300 
 9 2 - 3   0.0972
10 3 - 1  -0.131 
11 3 - 4   0.203 
12 3 - 2  -0.0972

Proportional gap closed: (Counterfactual - Factual) / Factual
# A tibble: 12 × 2
   X     estimate
   &lt;chr&gt;    &lt;dbl&gt;
 1 1 - 4    0.371
 2 1 - 2    0.123
 3 1 - 3    0.214
 4 4 - 1    0.371
 5 4 - 2    0.480
 6 4 - 3    0.710
 7 2 - 1    0.123
 8 2 - 4    0.480
 9 2 - 3    0.287
10 3 - 1    0.214
11 3 - 4    0.710
12 3 - 2    0.287</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing_ranger, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"4"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing_ranger, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">disparityplot</span>(fit_gapclosing_ranger, <span class="at">category_A =</span> <span class="st">"1"</span>, <span class="at">category_B =</span> <span class="st">"3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Causal_Decomposition_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Lundberg2022a" class="csl-entry" role="listitem">
Lundberg, Ian. 2022. <span>“The <span>Gap-Closing Estimand</span>: <span>A Causal Approach</span> to <span>Study Interventions That Close Disparities Across Social Categories</span>.”</span> <em>Sociological Methods &amp; Research</em>, January. <a href="https://doi.org/10.1177/00491241211055769">https://doi.org/10.1177/00491241211055769</a>.
</div>
<div id="ref-Park2023a" class="csl-entry" role="listitem">
Park, Soojin, Suyeon Kang, and Chioun Lee. 2023. <span>“Choosing an <span>Optimal Method</span> for <span>Causal Decomposition Analysis</span> with <span>Continuous Outcomes</span>: <span>A Review</span> and <span>Simulation Study</span>.”</span> <em>Sociological Methodology</em>, July, 00811750231183711. <a href="https://doi.org/10.1177/00811750231183711">https://doi.org/10.1177/00811750231183711</a>.
</div>
<div id="ref-Park2023" class="csl-entry" role="listitem">
Park, Soojin, Suyeon Kang, Chioun Lee, and Shujie Ma. 2023. <span>“Sensitivity <span>Analysis</span> for <span>Causal Decomposition Analysis</span>: <span>Assessing Robustness Toward Omitted Variable Bias</span>.”</span> <em>Journal of Causal Inference</em> 11 (1): 20220031. <a href="https://doi.org/10.1515/jci-2022-0031">https://doi.org/10.1515/jci-2022-0031</a>.
</div>
<div id="ref-Sudharsanan2021" class="csl-entry" role="listitem">
Sudharsanan, Nikkil, and Maarten J Bijlsma. 2021. <span>“Educational <span>Note</span>: <span>Causal Decomposition</span> of <span>Population Health Differences Using Monte Carlo Integration</span> and the <span>G-Formula</span>.”</span> <em>International Journal of Epidemiology</em> 50 (6): 2098–2107. <a href="https://doi.org/10.1093/ije/dyab090">https://doi.org/10.1093/ije/dyab090</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Kentaro-Kamada\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>